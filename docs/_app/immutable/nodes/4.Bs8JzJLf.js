import{d as wt,c as ot,a as g,f as M,s as u}from"../chunks/DuDN5BZk.js";import{p as kt,f as I,e as x,x as Mt,c as t,s as h,o as K,i as H,j as $t,k as St,$ as Rt,l,r as o,u as s,v as P,w as Tt}from"../chunks/OjaH-ej1.js";import{i as j}from"../chunks/C2YowYw5.js";import{e as jt,i as zt,s as Et}from"../chunks/_QM_GkS4.js";import{h as Ot,t as At,s as Ft}from"../chunks/D2j6qb9O.js";import{s as Ht,a as Lt}from"../chunks/C8L-NShg.js";import{b as Y}from"../chunks/BzW1DdYs.js";import{p as Nt}from"../chunks/B9Z5pekg.js";var Ct=M('<div class="normalTrust svelte-x0o7d6"><h3>Normal</h3></div>'),Dt=M('<div class="noTrust svelte-x0o7d6"><h3>Not Trusted</h3></div>'),Gt=M('<div class="yesTrust svelte-x0o7d6"><h3>Trusted</h3></div>'),Ut=M('<div class="lang svelte-x0o7d6"><h4 style="font-size: 25px;"> </h4> <h5 style="font-size: 20px;"> </h5></div>'),Vt=M('<h1 id="title">AFTONSPARV</h1> <h3 style="font-weight: 200; margin-bottom: 80px;">Hackatime Viewer</h3> <table><tbody><tr><td><div class="field svelte-x0o7d6" id="row1"><h6><span style="font-weight:500; font-size: 80px;" class="material-symbols-outlined" translate="no">account_circle</span></h6> <h2> </h2> <h3 style="margin-bottom: 40px;"><span class="text svelte-x0o7d6"> </span></h3> <!> <!> <!></div></td><td><div class="field svelte-x0o7d6" id="row2"><h4> </h4> <h3 style="font-family: Montserrat, Space Grotesk; font-weight: 800; font-size: 40px; margin-bottom: 2px;"> </h3> <h2 style="margin-bottom: 1px">By Language</h2> <p> </p> <div id="langContainer" class="svelte-x0o7d6"></div></div></td></tr></tbody></table> <button style="position: fixed; left: 10px; top: 20px;"><span class="material-symbols-outlined" translate="no">arrow_circle_left</span></button>',1),Bt=M('<h1 style="font-size: 100px;"> </h1> <h2 style="margin-bottom: 100px"> </h2> <h4><button style="font-size: 15px;">Return Home</button></h4> <p>You can also use <span>ESC</span> Key</p>',1);function Xt(rt,nt){kt(nt,!0);const p=()=>Lt(Nt,"$page",lt),[lt,it]=Ht();let $=I(["404","User could not be found. Maybe you entered the Slack ID incorrectly?"]),q=x(!1),z=x(!1),S=x("Loading"),E=x(0),O=0,m=x(0),i=I([]),J=x("0h 0m"),n=x(I([])),L=x("");Mt(()=>{if(t(n).length>1){let r="Filtered by sessions: ";for(let e=0;e<t(n).length-1;e++)r+=t(n)[e]+", ";r+=t(n)[t(n).length-1],h(L,r,!0)}else h(L,"Filtered by session: "+t(n)[0])}),K(async()=>{if(p().params.sessions.indexOf("[x]")>0){let e="";for(let a=0;a<p().params.sessions.length;a++)e.indexOf("[x]")>0?(t(n).push(e.substring(0,e.length-3)),a--,e=""):e+=p().params.sessions.substring(a,a+1);e.length>0&&t(n).push(e.substring(0,e.length-3))}else h(n,[p().params.sessions],!0);console.log(t(n));let r=await fetch("https://hackatime.hackclub.com/api/v1/users/"+p().params.user+"/stats");if(!r.ok)h(z,!0),h(S,"404");else{let e=await r.json();h(S,e.data.username,!0),h(E,e.trust_factor.trust_value,!0),O=e.data.total_seconds;for(let a in t(n))if(r=await fetch("https://hackatime.hackclub.com/api/v1/users/"+p().params.user+"/stats?filter_by_project="+t(n)[a]),e=await r.json(),e.data.total_seconds<O&&e.data.total_seconds!=0)h(m,t(m)+e.data.total_seconds);else return h(z,!0),h(S,"404"),$[1]="'"+t(n)[a]+"'  session was not found. Did you mispell the session name?",0;if(t(m)>O)return console.log("ERROR: Added secs is greater than total user secs",t(m),O),$[0]="ERROR",$[1]="Safety conditional on line 86 is true",h(z,!0),0;console.log(t(m));for(let a in t(n)){r=await fetch("https://hackatime.hackclub.com/api/v1/users/"+p().params.user+"/stats?filter_by_project="+t(n)[a]),e=await r.json();for(let d in e.data.languages){let f=!1;if(i.length>0){for(let v in i)if(i[v].name==e.data.languages[d].name){i[v].total_seconds+=e.data.languages[d].total_seconds,f=!0;break}}f||i.push({name:e.data.languages[d].name,total_seconds:e.data.languages[d].total_seconds,sessions:[t(n)[a]]})}console.log(i)}for(let a in i){i[a].percent=Math.round(i[a].total_seconds/t(m)*100);let d=Math.floor(i[a].total_seconds/60),f=Math.floor(d/60),v=i[a].total_seconds-d*60;d=d-f*60,i[a].text=f+"h "+d+"m "+v+"s"}{let a=Math.floor(t(m)/60),d=t(m)-a*60,f=Math.floor(a/60);a-=f*60,h(J,f+"h "+a+"m "+d+"s")}}}),K(function(){setTimeout(()=>{h(q,!0)},100)}),K(function(){document.addEventListener("keydown",function(r){r.key=="Escape"&&(window.location.href=Y+"/")})});var Q=ot();Ot("x0o7d6",r=>{St(()=>{Rt.title=`${t(S)??""} | Aftonsparv`})});var dt=H(Q);{var ct=r=>{var e=ot(),a=H(e);{var d=v=>{var R=Vt(),b=H(R),T=l(b,4),w=o(T),A=o(w),y=o(A),F=o(y),k=l(o(F),2),N=o(k,!0);s(k);var C=l(k,2),W=o(C),ht=o(W,!0);s(W),s(C);var X=l(C,2);{var vt=c=>{var _=Ct();g(c,_)};j(X,c=>{t(E)==0&&c(vt)})}var Z=l(X,2);{var ft=c=>{var _=Dt();g(c,_)};j(Z,c=>{t(E)<0&&c(ft)})}var ut=l(Z,2);{var pt=c=>{var _=Gt();g(c,_)};j(ut,c=>{t(E)>0&&c(pt)})}s(F),s(y);var tt=l(y),et=o(tt),D=o(et),mt=o(D,!0);s(D);var G=l(D,2),_t=o(G,!0);s(G);var U=l(G,4),gt=o(U);s(U);var at=l(U,2);jt(at,21,()=>i,zt,(c,_)=>{var V=Ut(),B=o(V),yt=o(B,!0);s(B);var st=l(B,2),bt=o(st,!0);s(st),s(V),P(()=>{u(yt,t(_).name),u(bt,t(_).text)}),g(c,V)}),s(at),s(et),s(tt),s(A),s(w),s(T);var xt=l(T,2);xt.__click=()=>{window.location.href=Y+"/"},P(()=>{u(N,t(S)),u(ht,p().params.user),u(mt,t(L)),u(_t,t(J)),u(gt,`(${i.length??""})`)}),At(3,b,()=>Ft),g(v,R)},f=v=>{var R=Bt(),b=H(R),T=o(b,!0);s(b);var w=l(b,2),A=o(w,!0);s(w);var y=l(w,2),F=o(y);F.__click=()=>{window.location.href=Y+"/"},s(y);var k=l(y,2),N=l(o(k));Et(N,"",{},{"font-family":"Montserrat, Space Grotesk, Futura","font-weight":"700"}),Tt(),s(k),P(()=>{u(T,$[0]),u(A,$[1])}),g(v,R)};j(a,v=>{t(z)?v(f,!1):v(d)})}g(r,e)};j(dt,r=>{t(q)&&r(ct)})}g(rt,Q),$t(),it()}wt(["click"]);export{Xt as component};
