import"../chunks/DsnmJJEf.js";import{o as B}from"../chunks/Bs2tO7ep.js";import{p as $t,h as I,e as _,u as Mt,g as t,s as v,f as O,i as St,j as Tt,$ as jt,k as n,o as r,r as s,q as K,v as zt}from"../chunks/SeWqStNZ.js";import{d as Rt,i as j,s as f}from"../chunks/sENNNyzj.js";import{h as At,e as Et,i as Ft,t as Ot,s as Ht,a as Lt}from"../chunks/DWx53dAi.js";import{c as nt,a as g,f as $}from"../chunks/BvQwnhtx.js";import{s as Nt,a as Ct}from"../chunks/_bWk5f5V.js";import{b as P}from"../chunks/Bzn-45O-.js";import{p as Dt}from"../chunks/Cmr6YFFh.js";var Gt=$('<div class="normalTrust svelte-x0o7d6"><h3>Normal</h3></div>'),Ut=$('<div class="noTrust svelte-x0o7d6"><h3>Not Trusted</h3></div>'),Vt=$('<div class="yesTrust svelte-x0o7d6"><h3>Trusted</h3></div>'),qt=$('<div class="lang svelte-x0o7d6"><h4 style="font-size: 25px;"> </h4> <h5 style="font-size: 20px;"> <span class="text svelte-x0o7d6" style="padding: 5px; margin-left: 5px;"> </span></h5></div>'),Bt=$('<h1 id="title">AFTONSPARV</h1> <h3 style="font-weight: 200; margin-bottom: 80px;">Hackatime Viewer</h3> <table><tbody><tr><td><div class="field svelte-x0o7d6" id="row1"><h6><span style="font-weight:500; font-size: 80px;" class="material-symbols-outlined" translate="no">account_circle</span></h6> <h2> </h2> <h3 style="margin-bottom: 40px;"><span class="text svelte-x0o7d6"> </span></h3> <!> <!> <!></div></td><td><div class="field svelte-x0o7d6" id="row2"><h4> </h4> <h3 style="font-family: Montserrat, Space Grotesk; font-weight: 800; font-size: 40px; margin-bottom: 2px;"> </h3> <h2 style="margin-bottom: 1px">By Language</h2> <p> </p> <div id="langContainer" class="svelte-x0o7d6"></div></div></td></tr></tbody></table> <button style="position: fixed; left: 10px; top: 20px;"><span class="material-symbols-outlined" translate="no">arrow_circle_left</span></button>',1),It=$('<h1 style="font-size: 100px;"> </h1> <h2 style="margin-bottom: 100px"> </h2> <h4><button style="font-size: 15px;">Return Home</button></h4> <p>You can also use <span>ESC</span> Key</p>',1);function ee(lt,it){$t(it,!0);const m=()=>Ct(Dt,"$page",dt),[dt,ct]=Nt();let H=I(["404","User could not be found. Maybe you entered the Slack ID incorrectly?"]),Y=_(!1),z=_(!1),M=_("Loading"),R=_(0),A=0,x=_(0),c=I([]),J=_("0h 0m"),l=_(I([])),L=_("");Mt(()=>{if(t(l).length>1){let o="Filtered by sessions: ";for(let e=0;e<t(l).length-1;e++)o+=t(l)[e]+", ";o+=t(l)[t(l).length-1],v(L,o,!0)}else v(L,"Filtered by session: "+t(l)[0])}),B(async()=>{if(m().params.sessions.indexOf("[x]")>0){let e="";for(let a=0;a<m().params.sessions.length;a++)e.indexOf("[x]")>0?(t(l).push(e.substring(0,e.length-3)),a--,e=""):e+=m().params.sessions.substring(a,a+1);e.length>0&&t(l).push(e.substring(0,e.length-3))}else v(l,[m().params.sessions],!0);console.log(t(l));let o=await fetch("https://hackatime.hackclub.com/api/v1/users/"+m().params.user+"/stats");if(!o.ok)v(z,!0),v(M,"404");else{let e=await o.json();v(M,e.data.username,!0),v(R,e.trust_factor.trust_value,!0),A=e.data.total_seconds;for(let a in t(l))if(o=await fetch("https://hackatime.hackclub.com/api/v1/users/"+m().params.user+"/stats?filter_by_project="+t(l)[a]),e=await o.json(),e.data.total_seconds<A)v(x,t(x)+e.data.total_seconds);else return v(z,!0),v(M,"404"),H[1]="'"+t(l)[a]+"'  session was not found. Did you mispell the session name?",0;t(x)>A&&console.log("ERROR: Added secs is greater than total user secs",t(x),A);for(let a in t(l)){o=await fetch("https://hackatime.hackclub.com/api/v1/users/"+m().params.user+"/stats?filter_by_project="+t(l)[a]),e=await o.json();for(let i in e.data.languages){let p=!1;for(let h in c)c[h].name==e.data.languages[i].name&&(c[h].total_seconds+=e.data.languages[i].total_seconds,p=!0);p||c.push({name:e.data.languages[i].name,total_seconds:e.data.languages[i].total_seconds})}}for(let a in c){c[a].percent=Math.round(c[a].total_seconds/t(x)*100);let i=Math.floor(c[a].total_seconds/60),p=Math.floor(i/60),h=c[a].total_seconds-i*60;i=i-p*60,c[a].text=p+"h "+i+"m "+h+"s"}{let a=Math.floor(t(x)/60),i=t(x)-a*60,p=Math.floor(a/60);a-=p*60,v(J,p+"h "+a+"m "+i+"s")}}}),B(function(){setTimeout(()=>{v(Y,!0)},100)}),B(function(){document.addEventListener("keydown",function(o){o.key=="Escape"&&t(z)&&(window.location.href=P+"/")})});var Q=nt();At("x0o7d6",o=>{Tt(()=>{jt.title=`${t(M)??""} | Aftonsparv`})});var vt=O(Q);{var ht=o=>{var e=nt(),a=O(e);{var i=h=>{var S=Bt(),b=O(S),T=n(b,4),w=r(T),E=r(w),y=r(E),F=r(y),k=n(r(F),2),N=r(k,!0);s(k);var C=n(k,2),W=r(C),pt=r(W,!0);s(W),s(C);var X=n(C,2);{var ft=d=>{var u=Gt();g(d,u)};j(X,d=>{t(R)==0&&d(ft)})}var Z=n(X,2);{var ut=d=>{var u=Ut();g(d,u)};j(Z,d=>{t(R)<0&&d(ut)})}var mt=n(Z,2);{var _t=d=>{var u=Vt();g(d,u)};j(mt,d=>{t(R)>0&&d(_t)})}s(F),s(y);var tt=n(y),et=r(tt),D=r(et),gt=r(D,!0);s(D);var G=n(D,2),xt=r(G,!0);s(G);var U=n(G,4),yt=r(U);s(U);var at=n(U,2);Et(at,21,()=>c,Ft,(d,u)=>{var V=qt(),q=r(V),wt=r(q,!0);s(q);var st=n(q,2),rt=r(st),ot=n(rt),kt=r(ot);s(ot),s(st),s(V),K(()=>{f(wt,t(u).name),f(rt,`${t(u).text??""} `),f(kt,`${t(u).percent??""}%`)}),g(d,V)}),s(at),s(et),s(tt),s(E),s(w),s(T);var bt=n(T,2);bt.__click=()=>{window.location.href=P+"/"},K(()=>{f(N,t(M)),f(pt,m().params.user),f(gt,t(L)),f(xt,t(J)),f(yt,`(${c.length??""})`)}),Ot(3,b,()=>Ht),g(h,S)},p=h=>{var S=It(),b=O(S),T=r(b,!0);s(b);var w=n(b,2),E=r(w,!0);s(w);var y=n(w,2),F=r(y);F.__click=()=>{window.location.href=P},s(y);var k=n(y,2),N=n(r(k));Lt(N,"",{},{"font-family":"Montserrat, Space Grotesk, Futura","font-weight":"700"}),zt(),s(k),K(()=>{f(T,H[0]),f(E,H[1])}),g(h,S)};j(a,h=>{t(z)?h(p,!1):h(i)})}g(o,e)};j(vt,o=>{t(Y)&&o(ht)})}g(lt,Q),St(),ct()}Rt(["click"]);export{ee as component};
