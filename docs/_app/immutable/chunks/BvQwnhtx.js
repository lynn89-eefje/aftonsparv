import{x as d,y as b,z as l,A as h,B as g,C as E,D as _,F as T,T as M,G as k,H as y,I as A,J as p,K as F,L as m,M as N,N as v,O as x,P as D}from"./SeWqStNZ.js";function C(a){var t=document.createElement("template");return t.innerHTML=a.replaceAll("<!>","<!---->"),t.content}function c(a,t){var e=b;e.nodes===null&&(e.nodes={start:a,end:t,a:null,t:null})}function L(a,t){var e=(t&M)!==0,s=(t&k)!==0,r,i=!a.startsWith("<!>");return()=>{if(l)return c(h,null),h;r===void 0&&(r=C(i?a:"<!>"+a),e||(r=_(r)));var n=s||T?document.importNode(r,!0):r.cloneNode(!0);if(e){var f=_(n),o=n.lastChild;c(f,o)}else c(n,n);return n}}function O(a=""){if(!l){var t=d(a+"");return c(t,t),t}var e=h;return e.nodeType!==y&&(e.before(e=d()),A(e)),c(e,e),e}function P(){if(l)return c(h,null),h;var a=document.createDocumentFragment(),t=document.createComment(""),e=d();return a.append(t,e),c(t,e),a}function B(a,t){if(l){var e=b;((e.f&g)===0||e.nodes.end===null)&&(e.nodes.end=h),E();return}a!==null&&a.before(t)}class R{anchor;#t=new Map;#s=new Map;#e=new Map;#r=new Set;#a=!0;constructor(t,e=!0){this.anchor=t,this.#a=e}#n=()=>{var t=p;if(this.#t.has(t)){var e=this.#t.get(t),s=this.#s.get(e);if(s)F(s),this.#r.delete(e);else{var r=this.#e.get(e);r&&(this.#s.set(e,r.effect),this.#e.delete(e),r.fragment.lastChild.remove(),this.anchor.before(r.fragment),s=r.effect)}for(const[i,n]of this.#t){if(this.#t.delete(i),i===t)break;const f=this.#e.get(n);f&&(m(f.effect),this.#e.delete(n))}for(const[i,n]of this.#s){if(i===e||this.#r.has(i))continue;const f=()=>{if(Array.from(this.#t.values()).includes(i)){var u=document.createDocumentFragment();x(n,u),u.append(d()),this.#e.set(i,{effect:n,fragment:u})}else m(n);this.#r.delete(i),this.#s.delete(i)};this.#a||!s?(this.#r.add(i),N(n,f,!1)):f()}}};#i=t=>{this.#t.delete(t);const e=Array.from(this.#t.values());for(const[s,r]of this.#e)e.includes(s)||(m(r.effect),this.#e.delete(s))};ensure(t,e){var s=p,r=D();if(e&&!this.#s.has(t)&&!this.#e.has(t))if(r){var i=document.createDocumentFragment(),n=d();i.append(n),this.#e.set(t,{effect:v(()=>e(n)),fragment:i})}else this.#s.set(t,v(()=>e(this.anchor)));if(this.#t.set(s,t),r){for(const[f,o]of this.#s)f===t?s.skipped_effects.delete(o):s.skipped_effects.add(o);for(const[f,o]of this.#e)f===t?s.skipped_effects.delete(o.effect):s.skipped_effects.add(o.effect);s.oncommit(this.#n),s.ondiscard(this.#i)}else l&&(this.anchor=h),this.#n()}}export{R as B,B as a,c as b,P as c,L as f,O as t};
